11-03-16
new:
1、增加协议1167,1168，用于客户端拉取buf和设置buf
2、删除协议1650,1651 获取服务器时间
3、删除兑换奇异蛋的协议1704
4、删除协议1802,1812,检查单人的陆行鸟或传送点是否注册
5、增加协议1851,1852，拉取G档案注册状态和注册G档案
6、缓存怪物图鉴、地图注册点信息、每日上限限制
7、增加怪物组每日挑战次数限制(协议1304)
8
fix:
1、修改1038协议，增加返回用户在线时长及经验类型
2、修改接任务时的职业检查方式，定义宏来检查
3、增加地图明雷,当挑战明雷时必还有用户所见怪物类型一个（协议1301）
4、开放等级上限到30级
5、修改协议2000，拉取小屋信息，增加返回人物职业阶段
11-03-09
new:
1、增加拉取用户宠物数量的协议1564
2、增加获取浇灌次数和使用至纯之水浇灌的协议 2050、2051
3、当宠物数量达到上限时抓捕返回错误码
4、当宠物升级时实现天赋技能自动升级
5、增加历史宠物的天赋技能转换
fix:
1、修改获取宠物时给予的技能（1级获得天赋技能）
2、修改宠物技能的购买、删除时的缓存维护
3、修改宠物技能相关的DB协议
4、删除单独的拉宠物技能协议，修改拉宠物信息协议，增加返回宠物技能
5、修改拉取小屋宠物的协议，改成分页拉取小屋宠物
6、

11-03-04
new:
1、增加单人模式
2、增加用户投稿
3、增加净化之路相关协议（1136,1137,1138）
4、
fix:
1、修复等级到达100级时计算经验导致死循环的bug
2、修改背包维护，使用hash表动态维护
3、保存人物组队开关
4、修改怪物组的等级变更算法
5、扩展背包为48格，增加精灵卡片物品栏
6、修复换装后耐久回复的bug
7、修复兑换xiaomee少给的bug

11-02-24
new:
1、增加协议1814,1815（拉取场景中的物品状态，设置场景状态）

fix:
1、修改人物已完成任务的状态维护策略（由静态数组改为哈希表）
2、将人物、宠物的等级、小米的判断写成统一的宏
3、修改任务物品的掉落，只有特定的怪才掉落相应任务物品
4、修复组队战斗中在结束战斗前上线导致血量被重置的bug
5、修复用户登录退出时分配fd相同导致程序崩溃的bug
6、修改治疗中与DB的协议（删除092C协议，修改090D协议）

10-10-29
new:
1、增加协议1036，用于分配经验树经验
2、增加协议1103，通知客户端装备无耐久时消失
3、增加任务输出装备时对装备属性进行随机的功能
4、增加世界聊天功能
5、增加协议1703，猜大小获取物品
6、增加协议2001，广播小屋经验树发生变化

fix:
1、删除一些不再使用的协议及接口
2、错误码整理，重点针对组队、对战时的错误码进行具体区分
3、修改队伍是否等待对战动画的接口，只判断队员是否还在播动画
4、修正PK积分计算中无积分可扣除时的bug
5、在设置任务bug时，当任务未接直接返回，避免客户端弹出错误码

future:

10-10-21
new:
1、增加协议1324 通知客户端PK积分
2、增加协议1900（开宝箱）、1901（广播宝箱被打开）、1902（广播宝箱被激活）、1903（通知客户端开宝箱获得物品）、1904（登录时获取被激活的宝箱信息），实现抢宝箱功能
3、增加统计项
4、

fix:
1、将心跳包改为服务器端主动发送，如果未收到客户端的回复才将用户踢下线
2、修改1001、1002、1004、1005、1006、1007等人物信息包，增加返回职业等级和PK积分两个字段
3、修改协议1331的处理过程，修正将队员踢出队伍时将发起跳转的队伍踢出战斗的bug
4、修改挑战NPC协议的处理
	a、区分正在战斗中和正发起挑战两种情况，并返回不同错误码
	b、使用0表示挑战宝箱
5、修正PK积分计算时当总积分小于需扣除积分时，或当增加积分超过当日可获得积分时计算不正确的bug
6、修改任务系统，将接取、放弃、完成任务的逻辑判断从DB移到online处理

future:


10-10-15
new:
1、增加小概率遇到的暗雷怪物组和接任务才遇到的暗雷怪物组
2、增加地图中不同怪物的概率生成
3、增加完成任务信息的保存，用于判断地图跳转
4、增加任务输出中的技能输出
fix:
1、修正动画结束状态的保存（由于单人没有队伍信息，去掉batter_team中的status，在sprite中增加state）
2、增加battle_t的状态信息，只有在刚初始化时队员能离队
3、修改怪物派生方法，在建立对战信息时才对怪物的属性进行随机，降低内存使用
4、修正好友列表中不能看到其他服务器在线用户的bug
5、修改拉取其他用户详细信息的协议，修正无法正常显示用户相关属性的bug
6、完成协议1035，检查队伍是否能进入地图（相关任务是否完成）
7、修改进入地图协议，当队员任务没完成时先踢掉这个队员，当队员进入地图后需要播动画也踢掉这个队员
8、修改将宠物放入仓库后仍显示宠物跟随的bug
future:

10-10-9
new:
1、增加任务物品背包，将由后台产生的任务物品放在该背包中，避免这些物品占用收集品的格子
fix:
1、修改battle_t
	a、battle_id为64位，高32位为遇敌时间，低32为userid；
	b、team_id为64位,高32位为遇敌时间，与battle_id相同，低32位为队长ID
	c、与对战服务器的协议头中challenger改为battle_id，用64位表示
	d、战斗相关协议修改
2、针对增加的任务背包，修改物品相关接口，包括将物品添加、删除、更新缓存
future:

10-9-30
new:
1、增加组队发起对战后，队员离开队伍（被踢或自动离开）后，通知batsvr用户退出队伍，协议1347
2、增加协议1034，当用户走路出错时，返回服务器端上一次正确走路的信息，用于客户端恢复正常走路
3、协议1035，队长检查所有队员能否进入地图（未实现）
4、增加装扮的可删除属性，未实现其可删除判断（在仓库中的为同一接口，无法判断该装扮是否可删除）

fix:
1、修改获取经验参数的接口，经get_now_tm()->tm_wday的值为（1-7），原实现可能造成地址越界，结果也不正确
2、通过配表获得boss挑战中boss的能力是否随用户等级变化，以及变化的最小等级，修改npc挑战逻辑

future：
1、队员能否进入地图的判断，涉及到任务是否已完成（已完成任务较多，在服务器端按位保存已完成任务信息？涉及多用户，客户端实现有难度）
2、增加装扮的可删除属性判断（客户端判断？需要与策划沟通）
3、部分任务物品占有收集品的格子问题的解决

10-9-27
new:
1、增加踢用户下线协议1032
2、增加删除仓库物品协议1125
fix:
1、修改1314协议，从原来的遇怪通知包改为下次遇怪步数通知
2、修改挑战协议
	a、只有当所有队员上次挑战动画播完后才能挑战成功
	b、挑战普通怪物时客户端发送的uid为0，由服务器随机生成怪物ID
	c、挑战普通怪物后，重置用户遇怪的剩余步数（为避免挑战失败导致不能走路，暂时设定挑战失败也重置）
3、修改用户打飞的处理，增加积分结算
4、修改sprite结构体，增加用户走路起始点、剩余遇怪步数的记录
5、修改任务奖励的输出，将重复任务的奖励输出到用户的小屋经验树
6、修改场景跳转检查，增加通过任务直接跳转的地图
7、修改进入地图协议，当进入有怪地图时，重置并发送剩余遇敌步数
8、修改走路协议，客户端发送起始点、目标点以及上次走路实际经过步数
	a、服务器检查上次走路起始点和当前起始点之间的距离，如果超出实际经过步数，则出错
	b、服务器检查剩余遇怪步数，如果超出上次走路实际经过步数，出错
9、修改遇怪方式，每次服务器随机产生一个剩余遇怪步数，当客户端走完该步数，则必须发送挑战协议（遇怪），否则不能继续走路

future:


10-9-23
new:
1、增加协议1345，通知客户端对战服务器断开
2、增加协议1346，队长移交
3、增加后台积分结算功能，保存信息包括（当日积分、总积分、积分更新时间、组队胜、组队负、个人胜、个人负）
4、增加协议：1121 拉取仓库普通物品 1122 拉取仓库的装扮列表 1123 从仓库取放物品 1124 从仓库取放装扮
fix:
1、在battle_t结构体中增加average_lv用于计算用户pk积分
	a、修改init_challenger_battle和init_challengee_battle，增加平均等级的计算
2、修改协议1318协议，在beast_info中增加beast_lv，用于计算pk时敌方的平均等级
3、修改db 0x0838登录协议增加拉取pk积分信息
4、修改map_t结构体，增加防外挂用的字段信息（邻接地图）
5、修改检查队伍钥匙协议1118，在检查的同时扣除钥匙，防止播动画时有钥匙的队友离开场景无法进入地图
	注：外挂可以直接发送跳场景，而不扣除钥匙，已跟策划确认
6、修改跳转地图协议1004，增加场景跳转防外挂功能
furture:

10-9-16
new:
1、增加战斗动画播放结束的通知协议（未使用）
2、增加拉取仓库中宠物列表的协议1559
3、增加更新仓库中宠物摆放位置的协议1560
4、增加生活技能（宠物契约、宠物培养）的功能及经验增长
5、增加12点将用户踢下线的功能
6、增加当对战服务器断线通知将用户踢出战斗的接口（未实现完成）
fix:
1、修改每日各时间段经验倍率的配置方式
	a，将原沙漏显示时间与经验倍率绑定的方式改为分别配置沙漏显示时间、2小时内经验倍率和2-5小时的经验倍率
	b，修改接口获取经验倍率和获取沙漏显示时间
2、修改协议1333协议，从之前的在队伍全部进入地图发送改为用户跳转地图即发送
3、修改宠物经验获得（增加人物生活技能“宠物培养”的加成）
4、增加接口cache_update_skill_level专门计算技能的升级
5、修改1307协议战斗开始通知，修正原先队长刷浏览器导致该协议无法发送给队中其他用户的问题
6、一些接口的整理和接口名的修改
furture:
1、完成对战服务器断线将用户踢出战斗
2、场景防外挂的实现
3、物品仓库的相关协议（列表拉取，从仓库取出或放进）
4、PK积分输出
5、小屋经验树的经验保存
6、完成战斗动画结束的通知功能
7、队长移交
